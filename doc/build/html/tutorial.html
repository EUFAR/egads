<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorial &#8212; EGADS 0.8.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Algorithm Development" href="alg_development.html" />
    <link rel="prev" title="Installation" href="install.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="alg_development.html" title="Algorithm Development"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">EGADS 0.8.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<div class="section" id="exploring-egads">
<h2>Exploring EGADS<a class="headerlink" href="#exploring-egads" title="Permalink to this headline">¶</a></h2>
<p>The simplest way to start working with EGADS is to run it from the Python command line.
To load EGADS into the Python name-space, simply import it:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">egads</span>
</pre></div>
</div>
<p>You may then begin working with any of the algorithms and functions contained in EGADS.</p>
<p>There are several useful methods to explore the routines contained in EGADS.
The first is using the Python built-in <code class="docutils literal"><span class="pre">dir()</span></code> command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">(</span><span class="n">egads</span><span class="p">)</span>
</pre></div>
</div>
<p>returns all the classes and subpackages contained in EGADS. EGADS follows the
naming conventions from the Python Style Guide (<a class="reference external" href="http://www.python.org/dev/peps/pep-0008">http://www.python.org/dev/peps/pep-0008</a>),
so classes are always <code class="docutils literal"><span class="pre">MixedCase</span></code>, functions and modules are generally <code class="docutils literal"><span class="pre">lowercase</span></code> or <code class="docutils literal"><span class="pre">lowercase_with_underscores</span></code>. As a further example,</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">(</span><span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="p">)</span>
</pre></div>
</div>
<p>would returns all the classes and subpackages of the <code class="docutils literal"><span class="pre">egads.input</span></code> module.</p>
<p>Another way to explore EGADS is by using tab completion, if supported by your Python installation. Typing</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">egads</span><span class="o">.</span>
</pre></div>
</div>
<p>then hitting <code class="docutils literal"><span class="pre">TAB</span></code> will return a list of all available options.</p>
<p>Python has built-in methods to display documentation on any function known as docstrings.
The easiest way to access them is using the <code class="docutils literal"><span class="pre">help()</span></code> function:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">help</span><span class="p">(</span><span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">NetCdf</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&gt;&gt;&gt; egads.input.NetCdf?
</pre></div>
</div>
<p>will return all methods and their associated documentation for the <a class="reference internal" href="egadsapi.html#egads.input.netcdf_io.NetCdf" title="egads.input.netcdf_io.NetCdf"><code class="xref py py-class docutils literal"><span class="pre">NetCdf</span></code></a> class.</p>
<div class="section" id="simple-operations-with-egads">
<h3>Simple operations with EGADS<a class="headerlink" href="#simple-operations-with-egads" title="Permalink to this headline">¶</a></h3>
<p>To have a list of file in a directory, use the following function:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">get_file_list</span><span class="p">(</span><span class="s1">&#39;path/to/all/netcdf/files/*.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-egadsdata-class">
<h2>The <a class="reference internal" href="egadsapi.html#egads.core.egads_core.EgadsData" title="egads.core.egads_core.EgadsData"><code class="xref py py-class docutils literal"><span class="pre">EgadsData</span></code></a> class<a class="headerlink" href="#the-egadsdata-class" title="Permalink to this headline">¶</a></h2>
<p>At the core of the EGADS package is a data class intended to handle data and associated metadata
in a consistent way between files, algorithms and within the framework. This ensures that important
metadata is not lost when combining data form various sources in EGADS.</p>
<p>Additionally, by subclassing the Quantities and Numpy packages, EgadsData
incorporates unit comprehension to reduce unit-conversion errors during calculation, and
supports broad array manipulation capabilities. This section describes how to employ
the <a class="reference internal" href="egadsapi.html#egads.core.egads_core.EgadsData" title="egads.core.egads_core.EgadsData"><code class="xref py py-class docutils literal"><span class="pre">EgadsData</span></code></a> class in the EGADS program scope.</p>
<div class="section" id="creating-egadsdata-instances">
<h3>Creating <a class="reference internal" href="egadsapi.html#egads.core.egads_core.EgadsData" title="egads.core.egads_core.EgadsData"><code class="xref py py-class docutils literal"><span class="pre">EgadsData</span></code></a> instances<a class="headerlink" href="#creating-egadsdata-instances" title="Permalink to this headline">¶</a></h3>
<p>The EgadsData class takes four basic arguments:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>value</dt>
<dd>Value to assign to EgadsData instance. Can be scalar, array, or other EgadsData instance.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>units</dt>
<dd>Units to assign to EgadsData instance. Should be string representation of units, and can be
a compound units type such as &#8216;g/kg&#8217;, &#8216;m/s^2&#8217;, &#8216;feet/second&#8217;, etc.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>variable metadata</dt>
<dd>An instance of the <a class="reference internal" href="egadsapi.html#egads.core.metadata.VariableMetadata" title="egads.core.metadata.VariableMetadata"><code class="xref py py-class docutils literal"><span class="pre">VariableMetadata</span></code></a> type or dictionary, containing keywords and
values of any metadata to be associated with this EgadsData instance.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>other attributes</dt>
<dd>Any other attributes added to the class are automatically stored in the <a class="reference internal" href="egadsapi.html#egads.core.metadata.VariableMetadata" title="egads.core.metadata.VariableMetadata"><code class="xref py py-class docutils literal"><span class="pre">VariableMetadata</span></code></a>
instance associated with the EgadsData instance.</dd>
</dl>
</li>
</ul>
<p>The following are examples of creating <a class="reference internal" href="egadsapi.html#egads.core.egads_core.EgadsData" title="egads.core.egads_core.EgadsData"><code class="xref py py-class docutils literal"><span class="pre">EgadsData</span></code></a> instances:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;m&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;km&#39;</span><span class="p">,</span> <span class="n">b_metadata</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="mi">28</span><span class="p">,</span> <span class="s1">&#39;degC&#39;</span><span class="p">,</span> <span class="n">long_name</span><span class="o">=</span><span class="s2">&quot;current temperature&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If, during the call to EgadsData, no units are provided, but a variable metadata instance is provided
with a units property, this will then be used to define the EgadsData units:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x_metadata</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">VariableMetadata</span><span class="p">({</span><span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;long_name&#39;</span><span class="p">:</span><span class="s1">&#39;Test Variable&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">x_metadata</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">x</span><span class="o">.</span><span class="n">units</span>
<span class="go">m</span>
</pre></div>
</div>
<p>The EgadsData is a subclass of the Quantities and Numpy packages. Thus it allows different kind of operations
like addition, substraction, slicing, and many more. For each of those operations, a new EgadsData class is
created with all their attributes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">With mathematical operands, as metadata define an EgadsData before an operation, and may not reflect the new
EgadsData, it has been decided to not keep the metadata attribute. It&#8217;s the responsability of the user to
add a new <a class="reference internal" href="egadsapi.html#egads.core.metadata.VariableMetadata" title="egads.core.metadata.VariableMetadata"><code class="xref py py-class docutils literal"><span class="pre">VariableMetadata</span></code></a> instance or a dictionary to the new EgadsData object.</p>
</div>
</div>
<div class="section" id="metadata">
<h3>Metadata<a class="headerlink" href="#metadata" title="Permalink to this headline">¶</a></h3>
<p>The metadata object used by EgadsData is an instance
of <a class="reference internal" href="egadsapi.html#egads.core.metadata.VariableMetadata" title="egads.core.metadata.VariableMetadata"><code class="xref py py-class docutils literal"><span class="pre">VariableMetadata</span></code></a>, a dictionary object containing
methods to recognize, convert and validate known metadata types. It can reference
parent metadata objects, such as those from an algorithm or data file, to enable
users to track the source of a particular variable.</p>
<p>When reading in data from a supported file type (NetCDF, NASA Ames), or doing calculations with
an EGADS algorithm, EGADS will automatically populate the associated metadata and assign it
to the output variable. However, when creating an EgadsData instance manually, the metadata
must be user-defined.</p>
<p>As mentioned, <a class="reference internal" href="egadsapi.html#egads.core.metadata.VariableMetadata" title="egads.core.metadata.VariableMetadata"><code class="xref py py-class docutils literal"><span class="pre">VariableMetadata</span></code></a> is a dictionary object, thus all metadata
are stored as keyword:value pairs. To create metadata manually, simply pass in
a dictionary object containing the desired metadata:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">var_metadata_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span><span class="s1">&#39;test metadata object&#39;</span><span class="p">,</span>
<span class="go">                         &#39;_FillValue&#39;:-9999}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">var_metadata</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">VariableMetadata</span><span class="p">(</span><span class="n">var_metadata_dict</span><span class="p">)</span>
</pre></div>
</div>
<p>To take advantage of its metadata recognition capabilities, a <code class="docutils literal"><span class="pre">conventions</span></code> keyword can be
passed with the variable metadata to give a context to these metadata.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">var_metadata</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">VariableMetadata</span><span class="p">(</span><span class="n">var_metadata_dict</span><span class="p">,</span> <span class="n">conventions</span><span class="o">=</span><span class="s1">&#39;CF-1.0&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If a particular VariableMetadata object comes from a file or algorithm, the class attempts to assign the
<code class="docutils literal"><span class="pre">conventions</span></code> automatically. While reading from a file, for example, the class attempts to
discover the conventions used based on the &#8220;Conventions&#8221; keyword, if present.</p>
</div>
<div class="section" id="working-with-units">
<h3>Working with units<a class="headerlink" href="#working-with-units" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="egadsapi.html#egads.core.egads_core.EgadsData" title="egads.core.egads_core.EgadsData"><code class="xref py py-class docutils literal"><span class="pre">EgadsData</span></code></a> subclasses Quantities, thus all of the latter&#8217;s unit comprehension methods are available
when using <a class="reference internal" href="egadsapi.html#egads.core.egads_core.EgadsData" title="egads.core.egads_core.EgadsData"><code class="xref py py-class docutils literal"><span class="pre">EgadsData</span></code></a>. This section will outline the basics of unit comprehension. A
more detailed tutorial of the unit comprehension capabilities can be found at
<a class="reference external" href="http://packages.python.org/quantities/">http://packages.python.org/quantities/</a></p>
<p>In general, units are assigned to EgadsData instances when they are being created.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;m&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="s1">&#39;meters/second&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Once a unit type has been assigned to an EgadsData instance, it will remain that
class of unit and can only be converted between other types of that same unit. The <code class="docutils literal"><span class="pre">rescale</span></code>
method can be used to convert between similar units, but will give an error if an attempt is made
to convert to non-compatible units.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;m&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_km</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rescale</span><span class="p">(</span><span class="s1">&#39;km&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">a_km</span>
<span class="go">[&#39;EgadsData&#39;, array([0.001, 0.002, 0.003]), &#39;km&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_grams</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rescale</span><span class="p">(</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>
<span class="go">ValueError: Unable to convert between units of &quot;m&quot; and &quot;g&quot;</span>
</pre></div>
</div>
<p>Likewise, arithmetic operations between EgadsData instances are handled using the unit comprehension
provided by Quantities, and behave . For example adding units of a similar type is permitted:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;km&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="go">[&#39;EgadsData&#39;, array(5010.0), &#39;m&#39;]</span>
</pre></div>
</div>
<p>But, non-compatible types cannot be added. They can, however, be multiplied or divided:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span> <span class="o">+</span> <span class="n">time</span>
<span class="go">ValueError: Unable to convert between units of &quot;s&quot; and &quot;m&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span><span class="o">/</span><span class="n">time</span>
<span class="go">[&#39;EgadsData&#39;, array(10), &#39;m/s&#39;]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Quantities and therefore EgadsData does not support conversions between coordinate systems
that require a point of reference, such as temperature. In Quantities, temperatures are assumed
to be temperature differences, e.g. a dT of 20 degC is equal to a dT of 20 degK and vice versa.
Thus, in the Egads implementation, while most variables will automatically be converted to the correct
units when using algorithms, an Error will be raised if a temperature is provided in incorrect units.</p>
</div>
</div>
</div>
<div class="section" id="working-with-raw-text-files">
<h2>Working with raw text files<a class="headerlink" href="#working-with-raw-text-files" title="Permalink to this headline">¶</a></h2>
<p>EGADS provides the <a class="reference internal" href="egadsapi.html#egads.input.text_file_io.EgadsFile" title="egads.input.text_file_io.EgadsFile"><code class="xref py py-class docutils literal"><span class="pre">egads.input.text_file_io.EgadsFile</span></code></a> class as a simple wrapper for interacting with
generic text files. <a class="reference internal" href="egadsapi.html#egads.input.text_file_io.EgadsFile" title="egads.input.text_file_io.EgadsFile"><code class="xref py py-class docutils literal"><span class="pre">EgadsFile</span></code></a> can read, write and display data from text files, but does
not have any tools for automatically formatting input or output data.</p>
<div class="section" id="opening">
<h3>Opening<a class="headerlink" href="#opening" title="Permalink to this headline">¶</a></h3>
<p>To open a text file the <a class="reference internal" href="egadsapi.html#egads.input.text_file_io.EgadsFile" title="egads.input.text_file_io.EgadsFile"><code class="xref py py-class docutils literal"><span class="pre">EgadsFile</span></code></a> class, use the
<code class="xref py py-meth docutils literal"><span class="pre">open(filename,</span> <span class="pre">permissions)()</span></code> method:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">egads</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">EgadsFile</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;/pathname/filename.txt&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Valid values for permissions are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">r</span></code> &#8211; Read: opens file for reading only. Default value if nothing is provided.</li>
<li><code class="docutils literal"><span class="pre">w</span></code> &#8211; Write: opens file for writing, and overwrites data in file.</li>
<li><code class="docutils literal"><span class="pre">a</span></code> &#8211; Append: opens file for appending data.</li>
<li><code class="docutils literal"><span class="pre">r+</span></code> &#8211; Read and write: opens file for both reading and writing.</li>
</ul>
</div>
<div class="section" id="file-manipulation">
<h3>File Manipulation<a class="headerlink" href="#file-manipulation" title="Permalink to this headline">¶</a></h3>
<p>The following methods are available to control the current position in the file and display more
information about the file.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">f.display_file()</span></code> &#8211; Prints contents of file out to standard output.</li>
<li><code class="docutils literal"><span class="pre">f.get_position()</span></code> &#8211; Returns current position in file as integer.</li>
<li><code class="docutils literal"><span class="pre">f.seek(location,</span> <span class="pre">from_where)</span></code> &#8211; Seeks to specified location in file. <code class="docutils literal"><span class="pre">location</span></code> is an integer specifying how far to seek. Valid options for <code class="docutils literal"><span class="pre">from_where</span></code> are <code class="docutils literal"><span class="pre">b</span></code> to seek from beginning of file, <code class="docutils literal"><span class="pre">c</span></code> to seek from current position in file and <code class="docutils literal"><span class="pre">e</span></code> to seek from the end of the file.</li>
<li><code class="docutils literal"><span class="pre">f.reset()</span></code> &#8211; Resets position to beginning of file.</li>
</ul>
</div>
<div class="section" id="reading-data">
<h3>Reading Data<a class="headerlink" href="#reading-data" title="Permalink to this headline">¶</a></h3>
<p>Reading data is done using the <code class="docutils literal"><span class="pre">read(size)</span></code> method on a file that has been opened with <code class="docutils literal"><span class="pre">r</span></code> or
<code class="docutils literal"><span class="pre">r+</span></code> permissions:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">egads</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">EgadsFile</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;myfile.txt&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">single_char_value</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">multiple_chars</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>If the <code class="docutils literal"><span class="pre">size</span></code> parameter is not specified, the <code class="docutils literal"><span class="pre">read()</span></code> function will input a single character
from the open file. Providing an integer value <em>n</em> as the <code class="docutils literal"><span class="pre">size</span></code> parameter to <code class="docutils literal"><span class="pre">read(size)</span></code>
will return <em>n</em> characters from the open file.</p>
<p>Data can be read line-by-line from text files using <code class="docutils literal"><span class="pre">read_line()</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">line_in</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read_line</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-data">
<h3>Writing Data<a class="headerlink" href="#writing-data" title="Permalink to this headline">¶</a></h3>
<p>To write data to a file, use the <code class="docutils literal"><span class="pre">write(data)</span></code> method on a file that has been opened with
<code class="docutils literal"><span class="pre">w</span></code>, <code class="docutils literal"><span class="pre">a</span></code> or <code class="docutils literal"><span class="pre">r+</span></code> permissions:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">egads</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">EgadsFile</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;myfile.txt&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;Testing output data to a file.</span><span class="se">\n</span><span class="s1"> This text will appear on the 2nd line.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="closing">
<h3>Closing<a class="headerlink" href="#closing" title="Permalink to this headline">¶</a></h3>
<p>To close a file, simply call the <code class="docutils literal"><span class="pre">close()</span></code> method:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h3>Tutorial<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Here is a basic ASCII file, created by EGADS:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># The current file has been created with EGADS</span>
<span class="c1"># Institution: My Institution</span>
<span class="c1"># Author(s): John Doe</span>
<span class="n">time</span>    <span class="n">sea</span> <span class="n">level</span>    <span class="n">corr</span> <span class="n">sea</span> <span class="n">level</span>
<span class="mf">1.0</span>    <span class="mf">5.0</span>    <span class="mf">1.0</span>
<span class="mf">2.0</span>    <span class="mf">2.0</span>    <span class="mf">3.0</span>
<span class="mf">3.0</span>    <span class="o">-</span><span class="mf">2.0</span>    <span class="o">-</span><span class="mf">1.0</span>
<span class="mf">4.0</span>    <span class="mf">0.5</span>    <span class="mf">2.5</span>
<span class="mf">5.0</span>    <span class="mf">4.0</span>    <span class="mf">6.0</span>
</pre></div>
</div>
<p>This file has been created with the following commands:</p>
<ul>
<li><p class="first">import EGADS module:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">egads</span>
</pre></div>
</div>
</li>
<li><p class="first">create two main variables, following the official EGADS convention:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data1</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mf">5.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">,</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">4.0</span><span class="p">],</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;mm&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sea level&#39;</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">add_offset</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">_FillValue</span><span class="o">=-</span><span class="mi">9999</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data2</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">3.0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.5</span><span class="p">,</span><span class="mf">6.0</span><span class="p">],</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;mm&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;corr sea level&#39;</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">add_offset</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">_FillValue</span><span class="o">=-</span><span class="mi">9999</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">create an independant variable, still by following the official EGADS convention:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">time</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">,</span><span class="mf">3.0</span><span class="p">,</span><span class="mf">4.0</span><span class="p">,</span><span class="mf">5.0</span><span class="p">],</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;seconds since 19700101T00:00:00&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">create a new EgadsFile instance:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">EgadsFile</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p class="first">use the following function to open a new file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;main_raw_file.dat&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">prepare the headers if necessary:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span> <span class="o">=</span> <span class="s1">&#39;# The current file has been created with EGADS</span><span class="se">\n</span><span class="s1"># Institution: My Institution</span><span class="se">\n</span><span class="s1"># Author(s): John Doe</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span> <span class="o">+=</span> <span class="n">time</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;long_name&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="n">data1</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;long_name&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="n">data2</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;long_name&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;&#39;My institution&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">prepare an object to receive all data:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
<span class="go">    ... data += str(time.value[i]) + &#39;    &#39; + str(data1.value[i]) + &#39;    &#39; + str(data2.value[i]) + &#39;\n&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">write the headers and data into the file</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">and do not forget to close the file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="working-with-csv-files">
<h2>Working with CSV files<a class="headerlink" href="#working-with-csv-files" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="egadsapi.html#egads.input.text_file_io.EgadsCsv" title="egads.input.text_file_io.EgadsCsv"><code class="xref py py-class docutils literal"><span class="pre">egads.input.text_file_io.EgadsCsv</span></code></a> is designed to easily input or output data in CSV format.
Data input using <a class="reference internal" href="egadsapi.html#egads.input.text_file_io.EgadsCsv" title="egads.input.text_file_io.EgadsCsv"><code class="xref py py-class docutils literal"><span class="pre">EgadsCsv</span></code></a> is separated into a list of arrays, which each column a separate
array in the list.</p>
<div class="section" id="id2">
<h3>Opening<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>To open a text file the <a class="reference internal" href="egadsapi.html#egads.input.text_file_io.EgadsCsv" title="egads.input.text_file_io.EgadsCsv"><code class="xref py py-class docutils literal"><span class="pre">EgadsCsv</span></code></a> class, use the
<code class="docutils literal"><span class="pre">open(pathname,</span> <span class="pre">permissions,</span> <span class="pre">delimiter,</span> <span class="pre">quotechar)</span></code> method:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">egads</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">EgadsCsv</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;/pathname/filename.txt&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Valid values for permissions are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">r</span></code> &#8211; Read: opens file for reading only. Default value if nothing is provided.</li>
<li><code class="docutils literal"><span class="pre">w</span></code> &#8211; Write: opens file for writing, and overwrites data in file.</li>
<li><code class="docutils literal"><span class="pre">a</span></code> &#8211; Append: opens file for appending data.</li>
<li><code class="docutils literal"><span class="pre">r+</span></code> &#8211; Read and write: opens file for both reading and writing.</li>
</ul>
<p>The <code class="docutils literal"><span class="pre">delimiter</span></code> argument is a one-character string specifying the character used to separate
fields in the CSV file to be read; the default value is <code class="docutils literal"><span class="pre">,</span></code>. The <code class="docutils literal"><span class="pre">quotechar</span></code> argument is a
one-character string specifying the character used to quote fields containing special characters
in the CSV file to to be read; the default value is <code class="docutils literal"><span class="pre">&quot;</span></code>.</p>
</div>
<div class="section" id="id3">
<h3>File Manipulation<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>The following methods are available to control the current position in the file and display more
information about the file.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">f.display_file()</span></code> &#8211; Prints contents of file out to standard output.</li>
<li><code class="docutils literal"><span class="pre">f.get_position()</span></code> &#8211; Returns current position in file as integer.</li>
<li><code class="docutils literal"><span class="pre">f.seek(location,</span> <span class="pre">from_where)</span></code> &#8211; Seeks to specified location in file. <code class="docutils literal"><span class="pre">location</span></code> is an integer specifying how far to seek. Valid options for <code class="docutils literal"><span class="pre">from_where</span></code> are <code class="docutils literal"><span class="pre">b</span></code> to seek from beginning of file, <code class="docutils literal"><span class="pre">c</span></code> to seek from current position in file and <code class="docutils literal"><span class="pre">e</span></code> to seek from the end of the file.</li>
<li><code class="docutils literal"><span class="pre">f.reset()</span></code> &#8211; Resets position to beginning of file.</li>
</ul>
</div>
<div class="section" id="id4">
<h3>Reading Data<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Reading data is done using the <code class="docutils literal"><span class="pre">read(lines,</span> <span class="pre">format)</span></code> method on a file that has been opened with <code class="docutils literal"><span class="pre">r</span></code> or <code class="docutils literal"><span class="pre">r+</span></code> permissions:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">egads</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">EgadsCsv</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;mycsvfile.csv&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">single_line_as_list</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">all_lines_as_list</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">read(lines,</span> <span class="pre">format)</span></code> returns a list of the items read in from the CSV file. The arguments
<code class="docutils literal"><span class="pre">lines</span></code> and <code class="docutils literal"><span class="pre">format</span></code> are optional. If <code class="docutils literal"><span class="pre">lines</span></code> is provided, <code class="docutils literal"><span class="pre">read(lines,</span> <span class="pre">format)</span></code>
will read in the specified number of lines, otherwise it will read the whole file. <code class="docutils literal"><span class="pre">format</span></code>
is an optional list of characters used to decompose the elements read in from the CSV files to
their proper types. Options are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">i</span></code> &#8211; int</li>
<li><code class="docutils literal"><span class="pre">f</span></code> &#8211; float</li>
<li><code class="docutils literal"><span class="pre">l</span></code> &#8211; long</li>
<li><code class="docutils literal"><span class="pre">s</span></code> &#8211; string</li>
</ul>
<p>Thus to read in the line:</p>
<p><code class="docutils literal"><span class="pre">FGBTM,20050105T143523,1.5,21,25</span></code></p>
<p>the command to input with proper formatting would look like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span><span class="s1">&#39;s&#39;</span><span class="p">,</span><span class="s1">&#39;f&#39;</span><span class="p">,</span><span class="s1">&#39;f&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h3>Writing Data<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>To write data to a file, use the <code class="docutils literal"><span class="pre">write(data)</span></code> method on a file that has been opened with
&#8216;w&#8217;, &#8216;a&#8217; or &#8216;r+&#8217; permissions:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">egads</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">EgadsCsv</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;mycsvfile.csv&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">titles</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Aircraft ID&#39;</span><span class="p">,</span><span class="s1">&#39;Timestamp&#39;</span><span class="p">,</span><span class="s1">&#39;Value1&#39;</span><span class="p">,</span><span class="s1">&#39;Value2&#39;</span><span class="p">,</span><span class="s1">&#39;Value3&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">titles</span><span class="p">)</span>
</pre></div>
</div>
<p>where the <code class="docutils literal"><span class="pre">titles</span></code> parameter is a list of strings. This list will be output to the CSV, with each
strings separated by the delimiter specified when the file was opened (default is &#8216;,&#8217;).</p>
<p>To write multiple lines out to a file, <code class="docutils literal"><span class="pre">writerows(data)</span></code> is used:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;FGBTM&#39;</span><span class="p">,</span><span class="s1">&#39;20050105T143523&#39;</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">25</span><span class="p">],[</span><span class="s1">&#39;FGBTM&#39;</span><span class="p">,</span><span class="s1">&#39;20050105T143524&#39;</span><span class="p">,</span><span class="mf">1.6</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mf">25.6</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h3>Closing<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>To close a file, simply call the <code class="docutils literal"><span class="pre">close()</span></code> method:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h3>Tutorial<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>Here is a basic CSV file, created by EGADS:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">time</span><span class="p">,</span><span class="n">sea</span> <span class="n">level</span><span class="p">,</span><span class="n">corrected</span> <span class="n">sea</span> <span class="n">level</span>
<span class="mf">1.0</span><span class="p">,</span><span class="mf">5.0</span><span class="p">,</span><span class="mf">1.0</span>
<span class="mf">2.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">,</span><span class="mf">3.0</span>
<span class="mf">3.0</span><span class="p">,</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span>
<span class="mf">4.0</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">2.5</span>
<span class="mf">5.0</span><span class="p">,</span><span class="mf">4.0</span><span class="p">,</span><span class="mf">6.0</span>
</pre></div>
</div>
<p>This file has been created with the following commands:</p>
<ul>
<li><p class="first">import EGADS module:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">egads</span>
</pre></div>
</div>
</li>
<li><p class="first">create two main variables, following the official EGADS convention:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data1</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mf">5.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">,</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">4.0</span><span class="p">],</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;mm&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sea level&#39;</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">add_offset</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">_FillValue</span><span class="o">=-</span><span class="mi">9999</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data2</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">3.0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.5</span><span class="p">,</span><span class="mf">6.0</span><span class="p">],</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;mm&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;corr sea level&#39;</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">add_offset</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">_FillValue</span><span class="o">=-</span><span class="mi">9999</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">create an independant variable, still by following the official EGADS convention:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">time</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">,</span><span class="mf">3.0</span><span class="p">,</span><span class="mf">4.0</span><span class="p">,</span><span class="mf">5.0</span><span class="p">],</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;seconds since 19700101T00:00:00&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">create a new EgadsFile instance:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">EgadsCsv</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p class="first">use the following function to open a new file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;main_csv_file.csv&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">prepare the headers if necessary:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;sea level&#39;</span><span class="p">,</span> <span class="s1">&#39;corrected sea level&#39;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first">prepare an object to receive all data:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">data1</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">data2</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first">write the headers and data into the file</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">and do not forget to close the file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="working-with-netcdf-files">
<h2>Working with NetCDF files<a class="headerlink" href="#working-with-netcdf-files" title="Permalink to this headline">¶</a></h2>
<p>EGADS provides two classes to work with NetCDF files. The simplest, <code class="xref py py-class docutils literal"><span class="pre">egads.input.netcdf.NetCdf</span></code>,
allows simple read/write operations to NetCDF files. The other, <code class="xref py py-class docutils literal"><span class="pre">egads.input.netcdf.EgadsNetCdf</span></code>,
is designed to interface with NetCDF files conforming to the EUFAR Standards &amp; Protocols data and metadata regulations.
This class directly reads or writes NetCDF data using instances of the <a class="reference internal" href="egadsapi.html#egads.core.egads_core.EgadsData" title="egads.core.egads_core.EgadsData"><code class="xref py py-class docutils literal"><span class="pre">EgadsData</span></code></a> class.</p>
<div class="section" id="id8">
<h3>Opening<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>To open a NetCDF file, simply create a <a class="reference internal" href="egadsapi.html#egads.input.netcdf_io.NetCdf" title="egads.input.netcdf_io.NetCdf"><code class="xref py py-class docutils literal"><span class="pre">NetCdf()</span></code></a> instance and then use the <code class="docutils literal"><span class="pre">open(pathname,</span> <span class="pre">permissions)</span></code> command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">egads</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">NetCdf</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;/pathname/filename.nc&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Valid values for permissions are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">r</span></code> &#8211; Read: opens file for reading only. Default value if nothing is provided.</li>
<li><code class="docutils literal"><span class="pre">w</span></code> &#8211; Write: opens file for writing, and overwrites data in file.</li>
<li><code class="docutils literal"><span class="pre">a</span></code> &#8211; Append: opens file for appending data.</li>
<li><code class="docutils literal"><span class="pre">r+</span></code> &#8211; Same as <code class="docutils literal"><span class="pre">a</span></code>.</li>
</ul>
</div>
<div class="section" id="getting-info">
<h3>Getting info<a class="headerlink" href="#getting-info" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">f.get_dimension_list()</span></code> &#8211; returns a list of all dimensions and their sizes</li>
<li><code class="docutils literal"><span class="pre">f.get_dimension_list(var_name)</span></code> &#8211; <code class="docutils literal"><span class="pre">var_name</span></code> is optional and if provided, the function returns a list of all dimensions and their sizes attached to <code class="docutils literal"><span class="pre">var_name</span></code></li>
<li><code class="docutils literal"><span class="pre">f.get_attribute_list()</span></code> &#8211; returns a list of all top-level attributes</li>
<li><code class="docutils literal"><span class="pre">f.get_attribute_list(var_name)</span></code> &#8211; <code class="docutils literal"><span class="pre">var_name</span></code> is optional and if provided, the function returns a list of all attributes attached to <code class="docutils literal"><span class="pre">var_name</span></code></li>
<li><code class="docutils literal"><span class="pre">f.get_variable_list()</span></code> &#8211; returns list of all variables</li>
<li><code class="docutils literal"><span class="pre">f.get_filename()</span></code> &#8211; returns filename for currently opened file</li>
<li><code class="docutils literal"><span class="pre">f.get_perms()</span></code> &#8211; returns the current permissions on the file that is open</li>
</ul>
</div>
<div class="section" id="id9">
<h3>Reading data<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>To read data from a file, use the <code class="docutils literal"><span class="pre">read_variable()</span></code> function:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read_variable</span><span class="p">(</span><span class="n">var_name</span><span class="p">,</span> <span class="n">input_range</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">var_name</span></code> is the name of the variable to read in, and <code class="docutils literal"><span class="pre">input_range</span></code> (optional) is a list
of min/max values.</p>
<p>If using the <code class="docutils literal"><span class="pre">egads.input.NetCdf()</span></code> class, an array of values contained in <code class="docutils literal"><span class="pre">var_name</span></code>
will be returned. IF using the <code class="docutils literal"><span class="pre">egads.input.EgadsNetCdf()</span></code> class, an instance of the
<code class="docutils literal"><span class="pre">EgadsData()</span></code> class will be returned containing the values and attributes of <code class="docutils literal"><span class="pre">var_name</span></code>.</p>
</div>
<div class="section" id="id10">
<h3>Writing data<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>The following describe how to add dimensions or attributes to a file.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">f.add_dim(dim_name,</span> <span class="pre">dim_size)</span></code> &#8211; add dimension to file</li>
<li><code class="docutils literal"><span class="pre">f.add_attribute(attr_name,</span> <span class="pre">attr_value)</span></code> &#8211; add attribute to file</li>
<li><code class="docutils literal"><span class="pre">f.add_attribute(attr_name,</span> <span class="pre">attr_value,</span> <span class="pre">var_name)</span></code> &#8211; <code class="docutils literal"><span class="pre">var_name</span></code> is optional and if provided, the function add attribute to <code class="docutils literal"><span class="pre">var_name</span></code></li>
</ul>
<p>Data can be output to variables using the <code class="docutils literal"><span class="pre">write_variable()</span></code> function as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_variable</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">var_name</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">var_name</span></code> is a string for the variable name to output, <code class="docutils literal"><span class="pre">dims</span></code> is a tuple
of dimension names (not needed if the variable already exists), and <code class="docutils literal"><span class="pre">type</span></code> is the
data type of the variable. The default value is <em>double</em>, other valid options
are <em>float</em>, <em>int</em>, <em>short</em>, <em>char</em> and <em>byte</em>.</p>
<p>If using <a class="reference internal" href="egadsapi.html#egads.input.netcdf_io.NetCdf" title="egads.input.netcdf_io.NetCdf"><code class="xref py py-class docutils literal"><span class="pre">NetCdf</span></code></a>, values for <code class="docutils literal"><span class="pre">data</span></code> passed into <code class="docutils literal"><span class="pre">write_variable</span></code>
must be scalar or array. Otherwise, if using <a class="reference internal" href="egadsapi.html#egads.input.netcdf_io.EgadsNetCdf" title="egads.input.netcdf_io.EgadsNetCdf"><code class="xref py py-class docutils literal"><span class="pre">EgadsNetCdf</span></code></a>, an instance
of <a class="reference internal" href="egadsapi.html#egads.core.egads_core.EgadsData" title="egads.core.egads_core.EgadsData"><code class="xref py py-class docutils literal"><span class="pre">EgadsData</span></code></a> must be passed into <code class="docutils literal"><span class="pre">write_variable</span></code>. In this case, any attributes
that are contained within the <a class="reference internal" href="egadsapi.html#egads.core.egads_core.EgadsData" title="egads.core.egads_core.EgadsData"><code class="xref py py-class docutils literal"><span class="pre">EgadsData</span></code></a> instance are applied to the NetCDF variable as well.</p>
</div>
<div class="section" id="conversion-from-netcdf-to-nasa-ames-file-format">
<h3>Conversion from NetCDF to NASA/Ames file format<a class="headerlink" href="#conversion-from-netcdf-to-nasa-ames-file-format" title="Permalink to this headline">¶</a></h3>
<p>The conversion is only possible on opened NetCDF files. If modifications have been made and haven&#8217;t been saved, the conversion won&#8217;t take into account those modifications. Actually, the only File Format Index supported by the conversion in the NASA/Ames format is 1001. Consequently, if variables depend on multiple independant variables (e.g. <code class="docutils literal"><span class="pre">data</span></code> is function of <code class="docutils literal"><span class="pre">time</span></code>, <code class="docutils literal"><span class="pre">longitude</span></code> and <code class="docutils literal"><span class="pre">latitude</span></code>), the file won&#8217;t be converted and the function will raise an exception. On the contrary, if multiple independant variables (or dimensions) exist, and if each variable depend on only one independant variable (e.g. <code class="docutils literal"><span class="pre">data</span></code> is only function of <code class="docutils literal"><span class="pre">time</span></code>), the file will be converted and the function will generate one file per independant variable. If the user needs to convert a complex file with variables depending on multiple independant variables, the conversion should be done manually by creating a NASA/Ames instance and a NASA/Ames dictionary, by populating the dictionary and by saving the file.</p>
<p>To convert a NetCDF file, simply use:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">f.convert_to_nasa_ames()</span></code> &#8211; convert the currently opened NetCDF file to NASA/Ames file format</li>
<li><code class="docutils literal"><span class="pre">f.convert_to_nasa_ames(na_file,</span> <span class="pre">requested_ffi,</span> <span class="pre">float_format,</span> <span class="pre">delimiter,</span> <span class="pre">annotation,</span> <span class="pre">no_header)</span></code> &#8211; <code class="docutils literal"><span class="pre">na_file</span></code>, <code class="docutils literal"><span class="pre">requested_ffi</span></code>, <code class="docutils literal"><span class="pre">float_format</span></code>, <code class="docutils literal"><span class="pre">delimiter</span></code>, <code class="docutils literal"><span class="pre">annotation</span></code> and <code class="docutils literal"><span class="pre">no_header</span></code> are optional parameters ; <code class="docutils literal"><span class="pre">na_file</span></code> is the name of the output file once it has been converted, by default the name of the NetCDF file will be used with the extension .na ; <code class="docutils literal"><span class="pre">requested_ffi</span></code> is not used actually, but will be functional in a next version of EGADS ; <code class="docutils literal"><span class="pre">float_format</span></code> is the formatting string used for formatting floats when writing to output file, by default <code class="docutils literal"><span class="pre">%g</span></code> ; <code class="docutils literal"><span class="pre">delimiter</span></code> is a character or a sequence of character for use between data items in the data file, by default &#8216;    &#8216; (four spaces) ; if <code class="docutils literal"><span class="pre">annotation</span></code> is set to <code class="docutils literal"><span class="pre">True</span></code>, write the output file with an additional left-hand column describing the contents of each header line, by default <code class="docutils literal"><span class="pre">False</span></code> ; if <code class="docutils literal"><span class="pre">no_header</span></code> is set to <code class="docutils literal"><span class="pre">True</span></code>, then only the data blocks are written to file, by default <code class="docutils literal"><span class="pre">False</span></code></li>
</ul>
<p>To convert a NetCDF file to NASA/Ames CSV format, simply use:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">f.convert_to_csv()</span></code> &#8211; convert the currently opened NetCDF file to NASA/Ames CSV format</li>
<li><code class="docutils literal"><span class="pre">f.convert_to_csv(csv_file,</span> <span class="pre">float_format,</span> <span class="pre">annotation,</span> <span class="pre">no_header)</span></code> &#8211; <code class="docutils literal"><span class="pre">csv_file</span></code>, <code class="docutils literal"><span class="pre">float_format</span></code>, <code class="docutils literal"><span class="pre">annotation</span></code> and <code class="docutils literal"><span class="pre">no_header</span></code> are optional parameters ; <code class="docutils literal"><span class="pre">csv_file</span></code> is the name of the output file once it has been converted, by default the name of the NetCDF file will be used with the extension .csv ; <code class="docutils literal"><span class="pre">float_format</span></code> is the formatting string used for formatting floats when writing to output file, by default <code class="docutils literal"><span class="pre">%g</span></code> ; if <code class="docutils literal"><span class="pre">annotation</span></code> is set to <code class="docutils literal"><span class="pre">True</span></code>, write the output file with an additional left-hand column describing the contents of each header line, by default <code class="docutils literal"><span class="pre">False</span></code> ; if <code class="docutils literal"><span class="pre">no_header</span></code> is set to <code class="docutils literal"><span class="pre">True</span></code>, then only the data blocks are written to file, by default <code class="docutils literal"><span class="pre">False</span></code></li>
</ul>
</div>
<div class="section" id="other-operations">
<h3>Other operations<a class="headerlink" href="#other-operations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">f.get_attribute_value(attr_name)</span></code> &#8211; returns the value of a global attribute</li>
<li><code class="docutils literal"><span class="pre">f.get_attribute_value(attr_name,</span> <span class="pre">var_name)</span></code> &#8211; <code class="docutils literal"><span class="pre">var_name</span></code> is optional and if provided, the function returns the value of an attribute attached to <code class="docutils literal"><span class="pre">var_name</span></code></li>
<li><code class="docutils literal"><span class="pre">f.change_variable_name(var_name,</span> <span class="pre">new_name)</span></code> &#8211; change the variable name in currently opened NetCDF file</li>
</ul>
</div>
<div class="section" id="id11">
<h3>Closing<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>To close a file, simply use the <code class="docutils literal"><span class="pre">close()</span></code> method:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id12">
<h3>Tutorial<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>Here is a NetCDF file, created by EGADS, and viewed by the command <code class="docutils literal"><span class="pre">ncdump</span> <span class="pre">-h</span> <span class="pre">....</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">=&gt;</span> <span class="n">ncdump</span> <span class="o">-</span><span class="n">h</span> <span class="n">main_netcdf_file</span><span class="o">.</span><span class="n">nc</span> 
    <span class="n">netcdf</span> <span class="n">main_netcdf_file</span> <span class="p">{</span>
    <span class="n">dimensions</span><span class="p">:</span>
        <span class="n">time</span> <span class="o">=</span> <span class="mi">5</span> <span class="p">;</span>
    <span class="n">variables</span><span class="p">:</span>
        <span class="n">double</span> <span class="n">time</span><span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="p">;</span>
            <span class="n">time</span><span class="p">:</span><span class="n">units</span> <span class="o">=</span> <span class="s2">&quot;seconds since 19700101T00:00:00&quot;</span> <span class="p">;</span>
            <span class="n">time</span><span class="p">:</span><span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;time&quot;</span> <span class="p">;</span>
        <span class="n">double</span> <span class="n">sea_level</span><span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="p">;</span>
            <span class="n">sea_level</span><span class="p">:</span><span class="n">_FillValue</span> <span class="o">=</span> <span class="o">-</span><span class="mf">9999.</span> <span class="p">;</span>
            <span class="n">sea_level</span><span class="p">:</span><span class="n">category</span> <span class="o">=</span> <span class="s2">&quot;TEST&quot;</span> <span class="p">;</span>
            <span class="n">sea_level</span><span class="p">:</span><span class="n">scale_factor</span> <span class="o">=</span> <span class="mf">1.</span> <span class="p">;</span>
            <span class="n">sea_level</span><span class="p">:</span><span class="n">add_offset</span> <span class="o">=</span> <span class="mf">0.</span> <span class="p">;</span>
            <span class="n">sea_level</span><span class="p">:</span><span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;sea level&quot;</span> <span class="p">;</span>
            <span class="n">sea_level</span><span class="p">:</span><span class="n">units</span> <span class="o">=</span> <span class="s2">&quot;mm&quot;</span> <span class="p">;</span>
        <span class="n">double</span> <span class="n">corrected_sea_level</span><span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="p">;</span>
            <span class="n">corrected_sea_level</span><span class="p">:</span><span class="n">_FillValue</span> <span class="o">=</span> <span class="o">-</span><span class="mf">9999.</span> <span class="p">;</span>
            <span class="n">corrected_sea_level</span><span class="p">:</span><span class="n">units</span> <span class="o">=</span> <span class="s2">&quot;mm&quot;</span> <span class="p">;</span>
            <span class="n">corrected_sea_level</span><span class="p">:</span><span class="n">add_offset</span> <span class="o">=</span> <span class="mf">0.</span> <span class="p">;</span>
            <span class="n">corrected_sea_level</span><span class="p">:</span><span class="n">scale_factor</span> <span class="o">=</span> <span class="mf">1.</span> <span class="p">;</span>
            <span class="n">corrected_sea_level</span><span class="p">:</span><span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;corr sea level&quot;</span> <span class="p">;</span>

    <span class="o">//</span> <span class="k">global</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="p">:</span><span class="n">Conventions</span> <span class="o">=</span> <span class="s2">&quot;CF-1.0&quot;</span> <span class="p">;</span>
            <span class="p">:</span><span class="n">history</span> <span class="o">=</span> <span class="s2">&quot;the netcdf file has been created by EGADS&quot;</span> <span class="p">;</span>
            <span class="p">:</span><span class="n">comments</span> <span class="o">=</span> <span class="s2">&quot;no comments on the netcdf file&quot;</span> <span class="p">;</span>
            <span class="p">:</span><span class="n">institution</span> <span class="o">=</span> <span class="s2">&quot;My institution&quot;</span> <span class="p">;</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>This file has been created with the following commands:</p>
<ul>
<li><p class="first">import EGADS module:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">egads</span>
</pre></div>
</div>
</li>
<li><p class="first">create two main variables, following the official EGADS convention:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data1</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mf">5.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">,</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">4.0</span><span class="p">],</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;mm&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sea level&#39;</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">add_offset</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">_FillValue</span><span class="o">=-</span><span class="mi">9999</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data2</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">3.0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.5</span><span class="p">,</span><span class="mf">6.0</span><span class="p">],</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;mm&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;corr sea level&#39;</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">add_offset</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">_FillValue</span><span class="o">=-</span><span class="mi">9999</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">create an independant variable, still by following the official EGADS convention:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">time</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">,</span><span class="mf">3.0</span><span class="p">,</span><span class="mf">4.0</span><span class="p">,</span><span class="mf">5.0</span><span class="p">],</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;seconds since 19700101T00:00:00&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">create a new EgadsNetCdf instance with a file name:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">EgadsNetCdf</span><span class="p">(</span><span class="s1">&#39;main_netcdf_file.nc&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">add the global attributes to the NetCDF file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s1">&#39;Conventions&#39;</span><span class="p">,</span> <span class="s1">&#39;CF-1.0&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s1">&#39;history&#39;</span><span class="p">,</span> <span class="s1">&#39;the netcdf file has been created by EGADS&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s1">&#39;comments&#39;</span><span class="p">,</span> <span class="s1">&#39;no comments on the netcdf file&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s1">&#39;institution&#39;</span><span class="p">,</span> <span class="s1">&#39;My institution&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">add the dimension(s) of your variable(s), here it is <code class="docutils literal"><span class="pre">time</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">add_dim</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">time</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p class="first">write the variable(s), it is a good practice to write at the first place the independant variable <code class="docutils literal"><span class="pre">time</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_variable</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,),</span> <span class="s1">&#39;double&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_variable</span><span class="p">(</span><span class="n">data1</span><span class="p">,</span> <span class="s1">&#39;sea_level&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,),</span> <span class="s1">&#39;double&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_variable</span><span class="p">(</span><span class="n">data2</span><span class="p">,</span> <span class="s1">&#39;corrected_sea_level&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,),</span> <span class="s1">&#39;double&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">and do not forget to close the file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="working-with-nasa-ames-files">
<h2>Working with NASA Ames files<a class="headerlink" href="#working-with-nasa-ames-files" title="Permalink to this headline">¶</a></h2>
<p>To work with NASA Ames files, EGADS incorporates the NAPpy library developed by Ag Stephens of BADC. Information about NAPpy can be found at <a class="reference external" href="http://proj.badc.rl.ac.uk/cows/wiki/CowsSupport/Nappy">http://proj.badc.rl.ac.uk/cows/wiki/CowsSupport/Nappy</a></p>
<p>In EGADS, the NAPpy API has been adapted to match the other EGADS file access methods. Thus, from EGADS, NASA Ames files can be accessed via the
<a class="reference internal" href="egadsapi.html#egads.input.nasa_ames_io.NasaAmes" title="egads.input.nasa_ames_io.NasaAmes"><code class="xref py py-class docutils literal"><span class="pre">egads.input.nasa_ames_io.NasaAmes</span></code></a> class. Actually, only the FFI 1001 has been interfaced with EGADS.</p>
<div class="section" id="id13">
<h3>Opening<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p>To open a NASA Ames file, simply create a <a class="reference internal" href="egadsapi.html#egads.input.nasa_ames_io.NasaAmes" title="egads.input.nasa_ames_io.NasaAmes"><code class="xref py py-class docutils literal"><span class="pre">NasaAmes()</span></code></a> instance and then use the <code class="docutils literal"><span class="pre">open(pathname,</span> <span class="pre">permissions)</span></code> command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">egads</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">NasaAmes</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;/pathname/filename.na&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Valid values for permissions are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">r</span></code> &#8211; Read: opens file for reading only. Default value if nothing is provided.</li>
<li><code class="docutils literal"><span class="pre">w</span></code> &#8211; Write: opens file for writing, and overwrites data in file.</li>
<li><code class="docutils literal"><span class="pre">a</span></code> &#8211; Append: opens file for appending data.</li>
<li><code class="docutils literal"><span class="pre">r+</span></code> &#8211; Same as <code class="docutils literal"><span class="pre">a</span></code>.</li>
</ul>
<p>Once a file has been opened, a dictionary of NASA/Ames format elements is loaded into memory. That dictionary will be used to overwrite the file or to save to a new file.</p>
</div>
<div class="section" id="id14">
<h3>Getting info<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">f.get_attribute_list()</span></code> &#8211; returns a list of all top-level attributes</li>
<li><code class="docutils literal"><span class="pre">f.get_attribute_list(var_name,</span> <span class="pre">var_type,</span> <span class="pre">na_dict)</span></code> &#8211; <code class="docutils literal"><span class="pre">var_name</span></code> is optional and if provided, the function returns list of all attributes attached to <code class="docutils literal"><span class="pre">var_name</span></code> ; if <code class="docutils literal"><span class="pre">var_type</span></code> is provided the function will search in the variable type <code class="docutils literal"><span class="pre">var_type</span></code> by default ; <code class="docutils literal"><span class="pre">na_dict</span></code> is optional if provided, will return a list of all top-level attributes, or all <code class="docutils literal"><span class="pre">var_name</span></code> attributes, in the NASA/Ames dictionary <code class="docutils literal"><span class="pre">na_dict</span></code></li>
<li><code class="docutils literal"><span class="pre">f.get_attribute_value(attr_name)</span></code> &#8211; returns the value of a global attribute named <code class="docutils literal"><span class="pre">attr_name</span></code></li>
<li><code class="docutils literal"><span class="pre">f.get_attribute_value(attr_name,</span> <span class="pre">var_name,</span> <span class="pre">var_type,</span> <span class="pre">na_dict)</span></code> &#8211; <code class="docutils literal"><span class="pre">var_name</span></code>, <code class="docutils literal"><span class="pre">var_type</span></code> and <code class="docutils literal"><span class="pre">na_dict</span></code> are optional ; if <code class="docutils literal"><span class="pre">var_name</span></code> is provided, returns the value of an attribute named <code class="docutils literal"><span class="pre">attr_name</span></code> attached to a variable named <code class="docutils literal"><span class="pre">var_name</span></code> ; if <code class="docutils literal"><span class="pre">var_type</span></code> is provided, the function will search in the variable type <code class="docutils literal"><span class="pre">var_type</span></code> by default ; if <code class="docutils literal"><span class="pre">na_dict</span></code> is provided, returns the attribute value from the NASA/Ames dictionary <code class="docutils literal"><span class="pre">na_dict</span></code></li>
<li><code class="docutils literal"><span class="pre">f.get_dimension_list()</span></code> &#8211; returns a list of all variable dimensions</li>
<li><code class="docutils literal"><span class="pre">f.get_dimension_list(na_dict,</span> <span class="pre">var_type)</span></code> &#8211; <code class="docutils literal"><span class="pre">var_type</span></code> is optional, if provided, the function returns a list of all variable dimensions based on the <code class="docutils literal"><span class="pre">var_type</span></code> by default ; <code class="docutils literal"><span class="pre">na_dict</span></code> is optional and will returns the dimension list from the NASA/Ames dictionary <code class="docutils literal"><span class="pre">na_dict</span></code> ;</li>
<li><code class="docutils literal"><span class="pre">f.get_variable_list()</span></code> &#8211; returns list of all variables ;</li>
<li><code class="docutils literal"><span class="pre">f.get_variable_list(na_dict)</span></code> &#8211; <code class="docutils literal"><span class="pre">na_dict</span></code> is optional and if provided, will return a list of all variables in the NASA/Ames dictionary <code class="docutils literal"><span class="pre">na_dict</span></code></li>
<li><code class="docutils literal"><span class="pre">f.get_filename()</span></code> &#8211; returns filename for currently opened file</li>
</ul>
</div>
<div class="section" id="id15">
<h3>Reading data<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<p>To read data from a file, use the <code class="docutils literal"><span class="pre">read_variable()</span></code> function:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read_variable</span><span class="p">(</span><span class="n">var_name</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">var_name</span></code> is the name of the variable to read in. The data will be read in to an instance of the <code class="docutils literal"><span class="pre">EgadsData()</span></code> class, containing the values and attributes of <code class="docutils literal"><span class="pre">var_name</span></code>.</p>
</div>
<div class="section" id="id16">
<h3>Writing data<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<p>To write data to the current file or to a new file, the user must save a dictionary of NASA/Ames elements. Few functions are
available to help him to prepare the dictionary:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">f.create_na_dict</span></code> &#8211; create a new dictionary populated with standard NASA/Ames keys.</li>
<li><code class="docutils literal"><span class="pre">f.write_attribute_value(attr_name,</span> <span class="pre">attr_value)</span></code> &#8211; write or replace a specific attribute (from the official NASA/Ames attribute list) in the currently opened dictionary</li>
<li><code class="docutils literal"><span class="pre">f.write_attribute_value(attr_name,</span> <span class="pre">attr_value,</span> <span class="pre">var_name,</span> <span class="pre">var_type,</span> <span class="pre">na_dict)</span></code> &#8211; <code class="docutils literal"><span class="pre">var_name</span></code> and <code class="docutils literal"><span class="pre">var_type</span></code> are optional, if provided, write or replace a specific attribute linked to the variable <code class="docutils literal"><span class="pre">var_name</span></code> (<code class="docutils literal"><span class="pre">var_type</span></code> is by default equal to &#8216;main&#8217;) in the currently opened dictionary ; ccepted attributes for a variable are &#8216;name&#8217;, &#8216;units&#8217;, &#8216;_FillValue&#8217; and &#8216;scale_factor&#8217;, other attributes will be refused and should be passed as &#8216;special comments&#8217; ; <code class="docutils literal"><span class="pre">na_dict</span></code> is optional and if provided the function will write the attribute in the NASA/Ames dictionary <code class="docutils literal"><span class="pre">na_dict</span></code></li>
<li><code class="docutils literal"><span class="pre">f.write_variable(data,</span> <span class="pre">var_name)</span></code> &#8211; write or replace a variable ; the function will search if <code class="docutils literal"><span class="pre">data</span></code> is already in the dictionary by comparing <code class="docutils literal"><span class="pre">varname</span></code> with other variable names in the dictionary, if it is found, <code class="docutils literal"><span class="pre">data</span></code> will replace the old variable, if not <code class="docutils literal"><span class="pre">data</span></code> is considered as a new variable ; <code class="docutils literal"><span class="pre">data</span></code> can be an <a class="reference internal" href="egadsapi.html#egads.core.egads_core.EgadsData" title="egads.core.egads_core.EgadsData"><code class="xref py py-class docutils literal"><span class="pre">EgadsData</span></code></a> or a vector/matrix.</li>
<li><code class="docutils literal"><span class="pre">f.write_variable(data,</span> <span class="pre">var_name,</span> <span class="pre">var_type,</span> <span class="pre">attr_dict,</span> <span class="pre">na_dict)</span></code> &#8211; <code class="docutils literal"><span class="pre">var_type</span></code>, <code class="docutils literal"><span class="pre">attr_dict</span></code> and <code class="docutils literal"><span class="pre">na_dict</span></code> are optional ; <code class="docutils literal"><span class="pre">attr_dict</span></code> (a dictionary of standard NASA/ames variable attributes: &#8216;name&#8217;, &#8216;units&#8217;, &#8216;_FillValue&#8217; and &#8216;scale_factor&#8217;) must be provided if <code class="docutils literal"><span class="pre">data</span></code> is not an <a class="reference internal" href="egadsapi.html#egads.core.egads_core.EgadsData" title="egads.core.egads_core.EgadsData"><code class="xref py py-class docutils literal"><span class="pre">EgadsData</span></code></a> (in that case, variable attributes are retrieve from the <a class="reference internal" href="egadsapi.html#egads.core.egads_core.EgadsData" title="egads.core.egads_core.EgadsData"><code class="xref py py-class docutils literal"><span class="pre">EgadsData</span></code></a>.metadata dictionary) ; if <code class="docutils literal"><span class="pre">na_dict</span></code> is provided, the function saves the variable in the NASA/Ames dictionary <code class="docutils literal"><span class="pre">na_dict</span></code></li>
</ul>
</div>
<div class="section" id="saving-a-file">
<h3>Saving a file<a class="headerlink" href="#saving-a-file" title="Permalink to this headline">¶</a></h3>
<p>Once a dictionary is ready, use the <code class="docutils literal"><span class="pre">save_na_file()</span></code> function to save the file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save_na_file</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">na_dict</span><span class="p">,</span> <span class="n">float_format</span><span class="p">):</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">file_name</span></code> is the name of the new file or the name of the current file, <code class="docutils literal"><span class="pre">na_dict</span></code> the name of the dictionary to be saved (optional, if not provided, the current dictionary will be used), and <code class="docutils literal"><span class="pre">float_format</span></code> the format of the floating numbers in the file (by deffault, two decimal places).</p>
</div>
<div class="section" id="conversion-from-nasa-ames-file-format-to-netcdf">
<h3>Conversion from NASA/Ames file format to NetCDF<a class="headerlink" href="#conversion-from-nasa-ames-file-format-to-netcdf" title="Permalink to this headline">¶</a></h3>
<p>When a NASA/Ames file is opened, all metadata and data are read and stored in memory in a dedicated dictionary. The conversion will convert that dictionary to generate a NetCDF file. If modifications are made to the dictionary, the conversion will take into account those modifications. Actually, the only File Format Index supported by the conversion in the NASA/Ames format is 1001. Consequently, if variables depend on multiple independant variables (e.g. <code class="docutils literal"><span class="pre">data</span></code> is function of <code class="docutils literal"><span class="pre">time</span></code>, <code class="docutils literal"><span class="pre">longitude</span></code> and <code class="docutils literal"><span class="pre">latitude</span></code>), the file won&#8217;t be converted and the function will raise an exception. If the user needs to convert a complex file with variables depending on multiple independant variables, the conversion should be done manually by creating a NetCDF instance and by populating the NetCDF files with NASA/Ames data and metadata.</p>
<p>To convert a NASA/Ames file, simply use:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">f.convert_to_netcdf()</span></code> &#8211; convert the currently opened NASA/Ames file to NetCDF format.</li>
<li><code class="docutils literal"><span class="pre">f.convert_to_netcdf(nc_file)</span></code> &#8211; <code class="docutils literal"><span class="pre">nc_file</span></code> is an optional parameter ; <code class="docutils literal"><span class="pre">na_file</span></code> is the name of the output file once it has been converted, by default the name of the NASA/Ames file will be used with the extension .nc</li>
</ul>
</div>
<div class="section" id="id17">
<h3>Other operations<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">f.read_na_dict()</span></code> &#8211; returns a deep copy of the current opened file dictionary</li>
<li><code class="docutils literal"><span class="pre">f.na_format_information()</span></code> &#8211; returns a text explaining the structure of a NASA/Ames file to help the user to modify or to create his own dictionary</li>
</ul>
</div>
<div class="section" id="id18">
<h3>Closing<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<p>To close a file, simply use the <code class="docutils literal"><span class="pre">close()</span></code> method:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id19">
<h3>Tutorial<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<p>Here is a NASA/Ames file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">23</span>    <span class="mi">1001</span>
<span class="n">John</span> <span class="n">Doe</span>
<span class="n">An</span> <span class="n">institution</span>
<span class="n">tide</span> <span class="n">gauge</span>
<span class="n">ATESTPROJECT</span>
<span class="mi">1</span>    <span class="mi">1</span>
<span class="mi">2017</span> <span class="mi">1</span> <span class="mi">30</span>    <span class="mi">2017</span> <span class="mi">1</span> <span class="mi">30</span>
<span class="mf">0.0</span>
<span class="n">time</span> <span class="p">(</span><span class="n">seconds</span> <span class="n">since</span> <span class="mi">19700101</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">)</span>
<span class="mi">2</span>
<span class="mi">1</span>    <span class="mi">1</span>
<span class="o">-</span><span class="mi">9999</span>    <span class="o">-</span><span class="mi">9999</span>
<span class="n">sea</span> <span class="n">level</span> <span class="p">(</span><span class="n">mm</span><span class="p">)</span>
<span class="n">corr</span> <span class="n">sea</span> <span class="n">level</span> <span class="p">(</span><span class="n">mm</span><span class="p">)</span>
<span class="mi">3</span>
<span class="o">========</span><span class="n">SPECIAL</span> <span class="n">COMMENTS</span><span class="o">===========</span>
<span class="n">this</span> <span class="n">file</span> <span class="n">has</span> <span class="n">been</span> <span class="n">created</span> <span class="k">with</span> <span class="n">egads</span>
<span class="o">=========</span><span class="n">END</span><span class="o">=========</span>
<span class="mi">4</span>
<span class="o">========</span><span class="n">NORMAL</span> <span class="n">COMMENTS</span><span class="o">===========</span>
<span class="n">headers</span><span class="p">:</span>
<span class="n">time</span>    <span class="n">sea</span> <span class="n">level</span>   <span class="n">corrected</span> <span class="n">sea</span> <span class="n">level</span>
<span class="o">=========</span><span class="n">END</span><span class="o">=========</span>
<span class="mf">1.00</span>    <span class="mf">5.00</span>    <span class="mf">1.00</span>
<span class="mf">2.00</span>    <span class="mf">2.00</span>    <span class="mf">3.00</span>
<span class="mf">3.00</span>    <span class="o">-</span><span class="mf">2.00</span>    <span class="o">-</span><span class="mf">1.00</span>
<span class="mf">4.00</span>    <span class="mf">0.50</span>    <span class="mf">2.50</span>
<span class="mf">5.00</span>    <span class="mf">4.00</span>    <span class="mf">6.00</span>
</pre></div>
</div>
<p>This file has been created with the following commands:</p>
<ul>
<li><dl class="first docutils">
<dt>import EGADS module:</dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">egads</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><p class="first">create two main variables, following the official EGADS convention:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data1</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mf">5.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">,</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">4.0</span><span class="p">],</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;mm&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sea level&#39;</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">_FillValue</span><span class="o">=-</span><span class="mi">9999</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data2</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">3.0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.5</span><span class="p">,</span><span class="mf">6.0</span><span class="p">],</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;mm&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;corr sea level&#39;</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">_FillValue</span><span class="o">=-</span><span class="mi">9999</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">create an independant variable, still by following the official EGADS convention:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">time</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">EgadsData</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">,</span><span class="mf">3.0</span><span class="p">,</span><span class="mf">4.0</span><span class="p">,</span><span class="mf">5.0</span><span class="p">],</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;seconds since 19700101T00:00:00&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">create a new NASA/Ames empty instance:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">NasaAmes</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p class="first">initialize a new NASA/Ames dictionary:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">na_dict</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">create_na_dict</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p class="first">prepare the normal and special comments if needed, in a list, one cell for each line:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">scom</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;========SPECIAL COMMENTS===========&#39;</span><span class="p">,</span><span class="s1">&#39;this file has been created with egads&#39;</span><span class="p">,</span><span class="s1">&#39;=========END=========&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ncom</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;========NORMAL COMMENTS===========&#39;</span><span class="p">,</span><span class="s1">&#39;headers:&#39;</span><span class="p">,</span><span class="s1">&#39;time    sea level   corrected sea level&#39;</span><span class="p">,</span><span class="s1">&#39;=========END=========&#39;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first">populate the main NASA/Ames attributes:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_attribute_value</span><span class="p">(</span><span class="s1">&#39;ONAME&#39;</span><span class="p">,</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">,</span> <span class="n">na_dict</span> <span class="o">=</span> <span class="n">na_dict</span><span class="p">)</span> <span class="c1"># ONAME is the name of the author(s)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_attribute_value</span><span class="p">(</span><span class="s1">&#39;ORG&#39;</span><span class="p">,</span> <span class="s1">&#39;An institution&#39;</span><span class="p">,</span> <span class="n">na_dict</span> <span class="o">=</span> <span class="n">na_dict</span><span class="p">)</span> <span class="c1"># ORG is tne name of the organization responsible for the data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_attribute_value</span><span class="p">(</span><span class="s1">&#39;SNAME&#39;</span><span class="p">,</span> <span class="s1">&#39;tide gauge&#39;</span><span class="p">,</span> <span class="n">na_dict</span> <span class="o">=</span> <span class="n">na_dict</span><span class="p">)</span> <span class="c1"># SNAME is the source of data (instrument, observation, platform, ...)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_attribute_value</span><span class="p">(</span><span class="s1">&#39;MNAME&#39;</span><span class="p">,</span> <span class="s1">&#39;ATESTPROJECT&#39;</span><span class="p">,</span> <span class="n">na_dict</span> <span class="o">=</span> <span class="n">na_dict</span><span class="p">)</span> <span class="c1"># MNAME is the name of the mission, campaign, programme, project dedicated to data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_attribute_value</span><span class="p">(</span><span class="s1">&#39;DATE&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">na_dict</span> <span class="o">=</span> <span class="n">na_dict</span><span class="p">)</span> <span class="c1"># DATE is the date at which the data recorded in this file begin (YYYY MM DD)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_attribute_value</span><span class="p">(</span><span class="s1">&#39;NIV&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">na_dict</span> <span class="o">=</span> <span class="n">na_dict</span><span class="p">)</span> <span class="c1"># NIV is the number of independent variables</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_attribute_value</span><span class="p">(</span><span class="s1">&#39;NSCOML&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">na_dict</span> <span class="o">=</span> <span class="n">na_dict</span><span class="p">)</span> <span class="c1"># NSCOML is the number of special comments lines or the number of elements in the SCOM list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_attribute_value</span><span class="p">(</span><span class="s1">&#39;NNCOML&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">na_dict</span> <span class="o">=</span> <span class="n">na_dict</span><span class="p">)</span> <span class="c1"># NNCOML is the number of special comments lines or the number of elements in the NCOM list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_attribute_value</span><span class="p">(</span><span class="s1">&#39;SCOM&#39;</span><span class="p">,</span> <span class="n">scom</span><span class="p">,</span> <span class="n">na_dict</span> <span class="o">=</span> <span class="n">na_dict</span><span class="p">)</span> <span class="c1"># SCOM is the special comments attribute</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_attribute_value</span><span class="p">(</span><span class="s1">&#39;NCOM&#39;</span><span class="p">,</span> <span class="n">ncom</span><span class="p">,</span> <span class="n">na_dict</span> <span class="o">=</span> <span class="n">na_dict</span><span class="p">)</span> <span class="c1"># NCOM is the normal comments attribute</span>
</pre></div>
</div>
</li>
<li><p class="first">write each variable in the dictionary:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_variable</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">vartype</span><span class="o">=</span><span class="s2">&quot;independant&quot;</span><span class="p">,</span> <span class="n">na_dict</span> <span class="o">=</span> <span class="n">na_dict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_variable</span><span class="p">(</span><span class="n">data1</span><span class="p">,</span> <span class="s1">&#39;sea level&#39;</span><span class="p">,</span> <span class="n">vartype</span><span class="o">=</span><span class="s2">&quot;main&quot;</span><span class="p">,</span> <span class="n">na_dict</span> <span class="o">=</span> <span class="n">na_dict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write_variable</span><span class="p">(</span><span class="n">data2</span><span class="p">,</span> <span class="s1">&#39;corrected sea level&#39;</span><span class="p">,</span> <span class="n">vartype</span><span class="o">=</span><span class="s2">&quot;main&quot;</span><span class="p">,</span> <span class="n">na_dict</span> <span class="o">=</span> <span class="n">na_dict</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">and finally, save the dictionary to a NASA/Ames file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">save_na_file</span><span class="p">(</span><span class="s1">&#39;na_example_file.na&#39;</span><span class="p">,</span> <span class="n">na_dict</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="converting-between-file-formats">
<h2>Converting between file formats<a class="headerlink" href="#converting-between-file-formats" title="Permalink to this headline">¶</a></h2>
<p>Since the first version of EGADS, the direct conversion was possible with the NAPpy library with the help of CDMS. As CDMS is not compatible with windows, that possibility has been dropped. However, two functions have been introduced to allow a conversion from NetCDF to NASA/Ames format, and from NASA/Ames format to NetCDF. Please read the section about NetCDF and NASA/Ames file handling to learn how to convert between those formats.</p>
</div>
<div class="section" id="working-with-algorithms">
<h2>Working with algorithms<a class="headerlink" href="#working-with-algorithms" title="Permalink to this headline">¶</a></h2>
<p>Algorithms in EGADS are stored in the <code class="xref py py-mod docutils literal"><span class="pre">egads.algorithms</span></code> module, and separated into sub-modules
by category (microphysics, thermodynamics, radiation, etc). Each algorithm follows a standard naming scheme, using the algorithm&#8217;s purpose and source:</p>
<p><code class="docutils literal"><span class="pre">{CalculatedParameter}{Detail}{Source}</span></code></p>
<p>For example, an algorithm which calculates static temperature, which was provided by CNRM would be
named:</p>
<p><code class="docutils literal"><span class="pre">TempStaticCnrm</span></code></p>
<div class="section" id="getting-algorithm-information">
<h3>Getting algorithm information<a class="headerlink" href="#getting-algorithm-information" title="Permalink to this headline">¶</a></h3>
<p>There are several methods to get information about each algorithm contained in EGADS. The EGADS
Algorithm Handbook is available for easy reference outside of Python. In the handbook, each algorithm
is described in detail, including a brief algorithm summary, descriptions of algorithm inputs and outputs,
the formula used in the algorithm, algorithm source and links to additional references. The handbook
also specifies the exact name of the algorithm as defined in EGADS. The handbook
can be found on the EGADS website.</p>
<p>Within Python, usage information on each algorithm can be found using the <code class="docutils literal"><span class="pre">help()</span></code> command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">help</span><span class="p">(</span><span class="n">egads</span><span class="o">.</span><span class="n">algorithms</span><span class="o">.</span><span class="n">thermodynamics</span><span class="o">.</span><span class="n">VelocityTasCnrm</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Help</span> <span class="n">on</span> <span class="k">class</span> <span class="nc">VelocityTasCnrm</span> <span class="ow">in</span> <span class="n">module</span> <span class="n">egads</span><span class="o">.</span><span class="n">algorithms</span><span class="o">.</span><span class="n">thermodynamics</span><span class="o">.</span>
<span class="go">    velocity_tas_cnrm:</span>

<span class="go">class VelocityTasCnrm(egads.core.egads_core.EgadsAlgorithm)</span>
<span class="go"> |  FILE        velocity_tas_cnrm.py</span>
<span class="go"> |</span>
<span class="go"> |  VERSION     $Revision: 104 $</span>
<span class="go"> |</span>
<span class="go"> |  CATEGORY    Thermodynamics</span>
<span class="go"> |</span>
<span class="go"> |  PURPOSE     Calculate true airspeed</span>
<span class="go"> |</span>
<span class="go"> |  DESCRIPTION Calculates true airspeed based on static temperature,</span>
<span class="go"> |              static pressure and dynamic pressure using St Venant&#39;s</span>
<span class="go"> |              formula.</span>
<span class="go"> |</span>
<span class="go"> |  INPUT       T_s         vector  K or C      static temperature</span>
<span class="go"> |              P_s         vector  hPa         static pressure</span>
<span class="go"> |              dP          vector  hPa         dynamic pressure</span>
<span class="go"> |              cpa         coeff.  J K-1 kg-1  specific heat of air (dry</span>
<span class="go"> |                                              air is 1004 J K-1 kg-1)</span>
<span class="go"> |              Racpa       coeff.  ()          R_a/c_pa</span>
<span class="go"> |</span>
<span class="go"> |  OUTPUT      V_p         vector  m s-1       true airspeed</span>
<span class="go"> |</span>
<span class="go"> |  SOURCE      CNRM/GMEI/TRAMM</span>
<span class="go"> |</span>
<span class="go"> |  REFERENCES  &quot;Mecanique des fluides&quot;, by S. Candel, Dunod.</span>
<span class="go"> |</span>
<span class="go"> |               Bulletin NCAR/RAF Nr 23, Feb 87, by D. Lenschow and</span>
<span class="go"> |               P. Spyers-Duran</span>
<span class="go"> |</span>
<span class="gp">...</span>
</pre></div>
</div>
</div>
<div class="section" id="calling-algorithms">
<h3>Calling algorithms<a class="headerlink" href="#calling-algorithms" title="Permalink to this headline">¶</a></h3>
<p>Algorithms in EGADS generally accept and return arguments of <code class="docutils literal"><span class="pre">EgadsData</span></code> type, unless
otherwise noted. This has the advantages of constant typing between algorithms, and allows
metadata to be passed along the whole processing chain. Units on parameters being passed in are also
checked for consistency, reducing errors in calculations. However, algorithms will accept any normal
data type, as well. They can also return non-<code class="docutils literal"><span class="pre">EgadsData</span></code> instances, if desired.</p>
<p>To call an algorithm, simply pass in the
required arguments, in the order they are described in the algorithm help function. An algorithm call,
using the <code class="docutils literal"><span class="pre">VelocityTasCnrm</span></code> in the previous section as an example, would therefore be the
following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">V_p</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">algorithms</span><span class="o">.</span><span class="n">thermodynamics</span><span class="o">.</span><span class="n">VelocityTasCnrm</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">T_s</span><span class="p">,</span> <span class="n">P_s</span><span class="p">,</span> <span class="n">dP</span><span class="p">,</span>
<span class="go">    cpa, Racpa)</span>
</pre></div>
</div>
<p>where the arguments <code class="docutils literal"><span class="pre">T_s</span></code>, <code class="docutils literal"><span class="pre">P_s</span></code>, <code class="docutils literal"><span class="pre">dP</span></code>, etc are all assumed to be previously defined in the
program scope. In this instance, the algorithm returns an <code class="docutils literal"><span class="pre">EgadsData</span></code> instance to <code class="docutils literal"><span class="pre">V_p</span></code>. To run
the algorithm, but return a standard data type (scalar or array of doubles), set the <code class="docutils literal"><span class="pre">return_Egads</span></code> flag to <code class="docutils literal"><span class="pre">false</span></code>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">V_p</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">algorithms</span><span class="o">.</span><span class="n">thermodynamics</span><span class="o">.</span><span class="n">VelocityTasCnrm</span><span class="p">(</span><span class="n">return_Egads</span><span class="o">=</span><span class="n">false</span><span class="p">)</span><span class="o">.</span>
<span class="go">    run(T_s, P_s, dP, cpa, Racpa)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="scripting">
<h2>Scripting<a class="headerlink" href="#scripting" title="Permalink to this headline">¶</a></h2>
<p>The recommended method for using EGADS is to create script files, which are extremely useful for common or
repetitive tasks. This can be done using a text editor of your choice. The example script belows
shows the calculation of density for all NetCDF files in a directory.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="c1"># import egads package</span>
<span class="kn">import</span> <span class="nn">egads</span>			
<span class="c1"># import thermodynamic module and rename to simplify usage</span>
<span class="kn">import</span> <span class="nn">egads.algorithms.thermodynamics</span> <span class="k">as</span> <span class="nn">thermo</span>

<span class="c1"># get list of all NetCDF files in &#39;data&#39; directory</span>
<span class="n">filenames</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">get_file_list</span><span class="p">(</span><span class="s1">&#39;data/*.nc&#39;</span><span class="p">)</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">egads</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">EgadsNetCdf</span><span class="p">()</span>   <span class="c1"># create EgadsNetCdf instance</span>

<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>          <span class="c1"># loop through files</span>

    <span class="n">f</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span>            <span class="c1"># open NetCdf file with append permissions</span>
    <span class="n">T_s</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read_variable</span><span class="p">(</span><span class="s1">&#39;T_t&#39;</span><span class="p">)</span> <span class="c1"># read in static temperature</span>
    <span class="n">P_s</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read_variable</span><span class="p">(</span><span class="s1">&#39;P_s&#39;</span><span class="p">)</span> <span class="c1"># read in static pressure from file</span>
    <span class="n">rho</span> <span class="o">=</span> <span class="n">thermo</span><span class="o">.</span><span class="n">DensityDryAirCnrm</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">P_s</span><span class="p">,</span> <span class="n">T_s</span><span class="p">)</span>  <span class="c1"># calculate density</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write_variable</span><span class="p">(</span><span class="n">rho</span><span class="p">,</span> <span class="s1">&#39;rho&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;Time&#39;</span><span class="p">,))</span>      <span class="c1"># output variable</span>

    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>                                    <span class="c1"># close file</span>

</pre></div>
</div>
<div class="section" id="scripting-hints">
<h3>Scripting Hints<a class="headerlink" href="#scripting-hints" title="Permalink to this headline">¶</a></h3>
<p>When scripting in Python, there are several important differences from other programming languages to keep in mind. This section outlines a few of these
differences.</p>
<div class="section" id="importance-of-white-space">
<h4>Importance of white space<a class="headerlink" href="#importance-of-white-space" title="Permalink to this headline">¶</a></h4>
<p>Python differs from C++ and Fortran in how loops or nested statements are signified. Whereas
C++ uses brackets (&#8216;<code class="docutils literal"><span class="pre">{</span></code>&#8216; and &#8216;<code class="docutils literal"><span class="pre">}</span></code>&#8216;) and FORTRAN uses <code class="docutils literal"><span class="pre">end</span></code> statements to signify the end of a
nesting, Python uses white space. Thus, for statements to nest properly, they must be set at the
proper depth. As long as the document is consistent, the number of spaces used doesn&#8217;t matter, however, most conventions call for 4 spaces to be used per level. See below for examples:</p>
<p><strong>FORTRAN</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">X</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">DO</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="mi">10</span>
  <span class="n">X</span> <span class="o">=</span> <span class="n">X</span> <span class="o">+</span> <span class="n">I</span>
  <span class="n">PRINT</span> <span class="n">I</span>
<span class="n">END</span> <span class="n">DO</span>
<span class="n">PRINT</span> <span class="n">X</span>
</pre></div>
</div>
<p><strong>Python</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">i</span>
    <span class="nb">print</span> <span class="n">i</span>
<span class="nb">print</span> <span class="n">x</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="using-the-gui">
<h2>Using the GUI<a class="headerlink" href="#using-the-gui" title="Permalink to this headline">¶</a></h2>
<p>Since September 2016, a Graphical User Interface is available at <a class="reference external" href="https://github.com/eufarn7sp/egads-gui">https://github.com/eufarn7sp/egads-gui</a>. It gives the user the possibility to explore data, apply algorithms, display and plot data. Still in beta state, the user will have the possibility to create algorithms from the GUI, and to work on a batch of file. For now, EGADS GUI comes as a simple python script and need to be launch from the terminal, if EGADS is installed, and once in the EGADS GUI directory:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">python</span> <span class="n">egads_gui</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>It will be available soon as a regular python package and as a stand alone (imbedding a version of EGADS CORE or using an already installed EGADS package).</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/eufar_new_logo_white_bkgrd.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tutorial</a><ul>
<li><a class="reference internal" href="#exploring-egads">Exploring EGADS</a><ul>
<li><a class="reference internal" href="#simple-operations-with-egads">Simple operations with EGADS</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-egadsdata-class">The <code class="docutils literal"><span class="pre">EgadsData</span></code> class</a><ul>
<li><a class="reference internal" href="#creating-egadsdata-instances">Creating <code class="docutils literal"><span class="pre">EgadsData</span></code> instances</a></li>
<li><a class="reference internal" href="#metadata">Metadata</a></li>
<li><a class="reference internal" href="#working-with-units">Working with units</a></li>
</ul>
</li>
<li><a class="reference internal" href="#working-with-raw-text-files">Working with raw text files</a><ul>
<li><a class="reference internal" href="#opening">Opening</a></li>
<li><a class="reference internal" href="#file-manipulation">File Manipulation</a></li>
<li><a class="reference internal" href="#reading-data">Reading Data</a></li>
<li><a class="reference internal" href="#writing-data">Writing Data</a></li>
<li><a class="reference internal" href="#closing">Closing</a></li>
<li><a class="reference internal" href="#id1">Tutorial</a></li>
</ul>
</li>
<li><a class="reference internal" href="#working-with-csv-files">Working with CSV files</a><ul>
<li><a class="reference internal" href="#id2">Opening</a></li>
<li><a class="reference internal" href="#id3">File Manipulation</a></li>
<li><a class="reference internal" href="#id4">Reading Data</a></li>
<li><a class="reference internal" href="#id5">Writing Data</a></li>
<li><a class="reference internal" href="#id6">Closing</a></li>
<li><a class="reference internal" href="#id7">Tutorial</a></li>
</ul>
</li>
<li><a class="reference internal" href="#working-with-netcdf-files">Working with NetCDF files</a><ul>
<li><a class="reference internal" href="#id8">Opening</a></li>
<li><a class="reference internal" href="#getting-info">Getting info</a></li>
<li><a class="reference internal" href="#id9">Reading data</a></li>
<li><a class="reference internal" href="#id10">Writing data</a></li>
<li><a class="reference internal" href="#conversion-from-netcdf-to-nasa-ames-file-format">Conversion from NetCDF to NASA/Ames file format</a></li>
<li><a class="reference internal" href="#other-operations">Other operations</a></li>
<li><a class="reference internal" href="#id11">Closing</a></li>
<li><a class="reference internal" href="#id12">Tutorial</a></li>
</ul>
</li>
<li><a class="reference internal" href="#working-with-nasa-ames-files">Working with NASA Ames files</a><ul>
<li><a class="reference internal" href="#id13">Opening</a></li>
<li><a class="reference internal" href="#id14">Getting info</a></li>
<li><a class="reference internal" href="#id15">Reading data</a></li>
<li><a class="reference internal" href="#id16">Writing data</a></li>
<li><a class="reference internal" href="#saving-a-file">Saving a file</a></li>
<li><a class="reference internal" href="#conversion-from-nasa-ames-file-format-to-netcdf">Conversion from NASA/Ames file format to NetCDF</a></li>
<li><a class="reference internal" href="#id17">Other operations</a></li>
<li><a class="reference internal" href="#id18">Closing</a></li>
<li><a class="reference internal" href="#id19">Tutorial</a></li>
</ul>
</li>
<li><a class="reference internal" href="#converting-between-file-formats">Converting between file formats</a></li>
<li><a class="reference internal" href="#working-with-algorithms">Working with algorithms</a><ul>
<li><a class="reference internal" href="#getting-algorithm-information">Getting algorithm information</a></li>
<li><a class="reference internal" href="#calling-algorithms">Calling algorithms</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scripting">Scripting</a><ul>
<li><a class="reference internal" href="#scripting-hints">Scripting Hints</a><ul>
<li><a class="reference internal" href="#importance-of-white-space">Importance of white space</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#using-the-gui">Using the GUI</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="install.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="alg_development.html"
                        title="next chapter">Algorithm Development</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/tutorial.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="alg_development.html" title="Algorithm Development"
             >next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Installation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">EGADS 0.8.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, EUFAR.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.
    </div>
  </body>
</html>